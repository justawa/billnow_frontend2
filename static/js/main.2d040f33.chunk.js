(this.webpackJsonpasc_billing=this.webpackJsonpasc_billing||[]).push([[0],{161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(2),r=a.n(c),s=a(30),i=a.n(s),l=(a(91),a(15)),o=a(34),d=a(78),j=a(32),h=a(13),u="AUTH_LOGIN",b="AUTH_ERROR",p="AUTH_LOGOUT",m="UPDATE_URL",x="ADD_TO_CART",O="UPDATE_CART",g="UPDATE_CART_ITEM",f="SEARCH_CUSTOMER",y="SELECT_CUSTOMER",v="SEARCH_PARTY",_="SELECT_PARTY",S="UPDATE_CART_MODE_OF_PAYMENT",C="UPDATE_CART_TOTAL_AMOUNT",w="UPDATE_CART_AMOUNT_REPAY",N="UPDATE_CART_AMOUNT_PAID",D="UPDATE_CART_DISCOUNT",k="SHOW_INVOICE",I="CLEAR_CART",P="CLEAR_CUSTOMER",T="SHOW_BILL",F={items:[],payment_mode:"cash",total_amount:0,item_amount:0,item_gst:0,amount_repay:0,amount_paid:0,discount:0};var A={customer:{},items:[]};var R={party:{},items:[]};var L={authenticated:{user:"",permisson:"",isLoggedIn:!1},error:""};var M=Object(o.c)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;if(t.type===x){var a=Number(t.payload.sale_price*t.payload.qty).toFixed(2);t.payload.price=a;var n=Object(h.a)(Object(h.a)({},e),{},{items:[t.payload].concat(Object(j.a)(e.items))}),c=n.items.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.price)).toFixed(2)}),0);return c-=n.discount,Object(h.a)(Object(h.a)({},n),{},{total_amount:c,amount_repay:c})}if(t.type===O){var r=Object(h.a)(Object(h.a)({},e),{},{items:t.payload}),s=r.items.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.price)).toFixed(2)}),0);return s-=r.discount,Object(h.a)(Object(h.a)({},r),{},{total_amount:s,amount_repay:s})}if(t.type===g){var i=Object(h.a)(Object(h.a)({},e),{},{items:t.payload}),l=i.items.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.price)).toFixed(2)}),0);return l-=i.discount,Object(h.a)(Object(h.a)({},i),{},{total_amount:l,amount_repay:l})}if(t.type===S)return Object(h.a)(Object(h.a)({},e),{},{payment_mode:t.payload});if(t.type===C)return Object(h.a)(Object(h.a)({},e),{},{total_amount:t.payload});if(t.type===w)return Object(h.a)(Object(h.a)({},e),{},{amount_repay:t.payload});if(t.type===N){var o=t.payload||0,d=Number(parseFloat(e.total_amount)-parseFloat(o)).toFixed(2);return Object(h.a)(Object(h.a)({},e),{},{amount_paid:t.payload,amount_repay:d})}if(t.type===D){var u=Object(h.a)(Object(h.a)({},e),{},{discount:t.payload}),b=u.items.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.price)).toFixed(2)}),0);return b-=u.discount,Object(h.a)(Object(h.a)({},u),{},{total_amount:b,amount_repay:b})}return t.type===I?Object(h.a)({},F):e},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:case y:return t.payload;case P:return{};default:return e}},party:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:case _:return t.payload;default:return e}},sale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},purchase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(h.a)(Object(h.a)({},e),{},{authenticated:{user:t.payload,permission:t.payload.permission,isLoggedIn:!0}});case b:return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});case p:return{authenticated:{user:"",permisson:"",isLoggedIn:!1},error:""};default:return e}},redirectURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;default:return e}}}),E=a(9),q=a(10),B=a(12),U=a(11),z=a(14),Y=a(22),G=a(16),H=a(170),V=a(171),W=a(172),Q=a(173),K=a(174),J=a(81),$=a(79),X=a.n($),Z=a(4),ee=a.n(Z),te=a(6),ae=a(80),ne=a.n(ae).a.create({baseURL:"https://findnearby.biz/asc_billing_2/api/"}),ce={all:{name:"all",redirectTo:"/"},reports:{name:"reports",redirectTo:"/daily-sale-report"},dataEntrySale:{name:"data-entry-sale",redirectTo:"/"},dataEntryPurchase:{name:"data-entry-purchase",redirectTo:"/bill"},other:{name:"other",redirectTo:"/"}},re=[{email:"all@admin.com",password:"12345678",permission:ce.all},{email:"reports@admin.com",password:"12345678",permission:ce.reports},{email:"dataentrysale@admin.com",password:"12345678",permission:ce.dataEntrySale},{email:"dataentrypurchase@admin.com",password:"12345678",permission:ce.dataEntryPurchase},{email:"other@admin.com",password:"12345678",permission:ce.other}],se=function(e){return{type:m,payload:e}},ie=function(e,t){return function(){var a=Object(te.a)(ee.a.mark((function a(n){var c;return ee.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.post("search-party",{phone:e});case 3:c=a.sent,n({type:v,payload:c.data.searched_party}),t(),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},le=function(e,t,a){var n=t.name,c=t.address,r=t.city,s=t.state,i=t.pincode;return function(){var t=Object(te.a)(ee.a.mark((function t(l){var o;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.put("update-party/".concat(e),{name:n,billing_address:c,billing_city:r,billing_state:s,billing_pincode:i});case 3:o=t.sent,l({type:_,payload:o.data.selected_party}),a(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},oe=function(e,t){return t(),{type:v,payload:e}},de=a(164),je=a(165),he=a(166),ue=a(167),be=a(168),pe=a(186),me=a(187),xe=a(188),Oe=a(169),ge=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(q.a)(a,[{key:"render",value:function(){var e=this.props.auth;return Object(n.jsxs)(de.a,{color:"faded",light:!0,expand:"md",children:[Object(n.jsx)(je.a,{to:e.permission?e.permission.redirectTo:"/login",children:"ASC Billing"}),e.isLoggedIn&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(he.a,{}),Object(n.jsx)(ue.a,{navbar:!0,children:Object(n.jsx)(be.a,{className:"ml-auto",navbar:!0,children:Object(n.jsxs)(pe.a,{nav:!0,inNavbar:!0,children:[Object(n.jsx)(me.a,{nav:!0,caret:!0,children:"Admin"}),Object(n.jsxs)(xe.a,{right:!0,children:[e.permission&&("all"===e.permission.name||"reports"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/daily-sale-report",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Daily Sale"}),e.permission&&("all"===e.permission.name||"data-entry-sale"===e.permission.name||"other"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Invoice"}),e.permission&&"all"===e.permission.name&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/sale-profit",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Sale Profit"}),e.permission&&("all"===e.permission.name||"reports"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/stock-summary",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Stock Summary"}),e.permission&&("all"===e.permission.name||"reports"===e.permission.name||"other"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/expense",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Expense"}),e.permission&&("all"===e.permission.name||"reports"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/daily-purchase-report",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Daily Purchase"}),e.permission&&("all"===e.permission.name||"other"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/customers",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Customers"}),e.permission&&("all"===e.permission.name||"data-entry-purchase"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/bill",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Bill"}),e.permission&&"all"===e.permission.name&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/most-sold-items",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Most Sold Items"}),e.permission&&"all"===e.permission.name&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/cancelled-invoice",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Cancelled Invoice"}),e.permission&&("all"===e.permission.name||"reports"===e.permission.name)&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/item-gst",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Item GST"}),e.permission&&"all"===e.permission.name&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/add-item",color:"warning",className:"text-uppercase m-1",size:"sm",children:"Add Item"}),e.permission&&"all"===e.permission.name&&Object(n.jsx)(Oe.a,{tag:z.b,to:"/items",color:"warning",className:"text-uppercase m-1",size:"sm",children:"All Items"}),Object(n.jsx)(Oe.a,{divider:!0}),Object(n.jsx)(Oe.a,{tag:z.b,to:"/logout",children:"Logout"})]})]})})})]})]})}}]),a}(r.a.Component),fe=Object(l.b)((function(e){return{auth:e.auth.authenticated}}))(ge),ye=a(27);function ve(){var e=Object(c.useState)([]),t=Object(ye.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.get("stock-less-than-ten");case 2:t=e.sent,r(t.data.items);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)("marquee",{children:a.map((function(e){return Object(n.jsxs)("span",{style:{marginRight:10},children:[e.product_name," -"," ",Object(n.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:e.rem_qty}),","]})}))})}function _e(e){function t(t){return e.children.filter((function(e){return e.key===t}))}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fe,{}),Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsxs)("div",{className:"row mb-2",children:[Object(n.jsx)("div",{className:"col-4",children:t("side-left")}),Object(n.jsx)("div",{className:"col-8",children:t("side-right")})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col",children:t("main")})})]}),Object(n.jsx)(ve,{})]})}var Se=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isFormloading:!1,email:"",password:""},e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,c=a.password;e.setState({isFormloading:!0,hasErrors:!1}),e.props.loginUser(n,c,(function(t){return e.props.history.push(t)}),(function(){return e.setState({isFormloading:!1})}))},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=X.a.parse(this.props.location.search);this.setState(e)}},{key:"render",value:function(){return this.state.isFormloading?Object(n.jsx)(H.a,{color:"primary"}):Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Login"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(V.a,{onSubmit:this.handleSubmit,children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"email",children:"Email"}),Object(n.jsx)(K.a,{type:"email",name:"email",id:"email",placeholder:"Your Email",value:this.state.email,onChange:this.handleChange})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"password",children:"Password"}),Object(n.jsx)(K.a,{type:"password",name:"password",id:"password",placeholder:"Your Password",value:this.state.password,onChange:this.handleChange})]}),Object(n.jsx)(J.a,{children:"Sign in"}),Object(n.jsx)("p",{style:{color:"red",fontSize:"12px"},children:this.props.errorMessage})]})})},"main")]})}}]),a}(c.Component),Ce=Object(l.b)((function(e){return{auth:e.auth.authenticated,errorMessage:e.auth.error,redirectURL:e.redirectURL}}),{loginUser:function(e,t,a,n){var c=re.find((function(a){return a.email===e&&a.password===t}));return c?(a(c.permission.redirectTo),{type:u,payload:c}):(n(),{type:b,payload:"Invalid Email or Password"})}})(Se),we=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(q.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.logoutUser((function(){return e.props.history.push("/login")}))}},{key:"render",value:function(){return Object(n.jsx)("div",{children:"Loading..."})}}]),a}(c.Component),Ne=Object(l.b)(null,{logoutUser:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:p,payload:""}),e();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(we),De=a(181),ke=a(177),Ie=a(178),Pe=a(182),Te=a(183),Fe=a(85);function Ae(e){function t(t){return e.children.filter((function(e){return e.key===t}))}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fe,{}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-3",children:t("side")}),Object(n.jsx)("div",{className:"col-9",children:t("main")})]})}),Object(n.jsx)(ve,{})]})}var Re=a(175),Le=a(176),Me=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(q.a)(a,[{key:"render",value:function(){var e=this.props,t=e.latestSales;e.auth;return console.log("latestSales",t),Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("div",{className:"mt-4",children:this.props.children}),t&&t.length>0?Object(n.jsxs)(Re.a,{children:[Object(n.jsx)("h5",{className:"text-center pt-3",children:"Latest Customers"}),t.map((function(e){return Object(n.jsxs)(Le.a,{style:{fontSize:12},children:[e.customer.phone," ",e.customer.name," ",Object(n.jsx)(z.b,{to:"/customers/".concat(e.customer.id),children:"All Invoices"})]},e.customer.id)}))]}):null]})})}}]),a}(c.Component),Ee=Object(l.b)((function(e){return{auth:e.auth.authenticated}}))(Me),qe=a(189),Be=a(179),Ue=a(180),ze=a(84),Ye=a.n(ze),Ge=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.intialValue,suggestions:[]},e.onChange=function(t,a){var n=a.newValue;e.setState({value:n},e.props.handleChange(n))},e.onSuggestionsFetchRequested=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=a.value).length>=3)){t.next=6;break}return t.next=4,e.getSuggestions(n);case 4:c=t.sent,e.setState({suggestions:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.getSuggestions=function(){var e=Object(te.a)(ee.a.mark((function e(t){var a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.get("customer-list?q=".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data.customers);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e.getSuggestionValue=function(t){return e.props.handleChange(t.phone),t.phone},e.renderSuggestion=function(e){return Object(n.jsxs)("div",{children:[e.phone,", ",e.name]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,c={placeholder:"Search Customer",value:t,className:"form-control",onChange:this.onChange};return Object(n.jsx)(Ye.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:c})}}]),a}(c.Component),He=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,phone:"",phoneError:"",name:"",address:"",city:"",state:"",pincode:"",card:""},e.toggleModal=function(){e.setState((function(e){return{isOpen:!e.isOpen}}))},e.handlePhoneChange=function(t){e.setState({phone:t,phoneError:""})},e.addNewCustomer=function(t){t.preventDefault(),e.state.phone?e.props.searchCustomerByPhone(e.state.phone,e.toggleModal):e.setState({phoneError:"Customer Mobile Number is required"})},e.handleInputChange=function(t){e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleFormSubmit=function(t,a){t.preventDefault(),e.props.updateCustomer(a,e.state,e.toggleModal)},e.renderForm=function(){var t=e.props.customer;return t.name&&t.billing_address&&t.billing_city&&t.billing_state&&t.billing_pincode?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{className:"text-center text-uppercase",children:[t.type," customer"]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"phone",children:"Phone"}),Object(n.jsx)(K.a,{type:"text",name:"phone",id:"phone",value:t.phone,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"name",children:"Name"}),Object(n.jsx)(K.a,{type:"text",name:"name",id:"name",value:t.name,readOnly:!0})]})})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"address",children:"Address"}),Object(n.jsx)(K.a,{type:"textarea",name:"address",id:"address",value:t.billing_address,readOnly:!0})]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"city",children:"City"}),Object(n.jsx)(K.a,{type:"text",name:"city",id:"city",value:t.billing_city,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"state",children:"State"}),Object(n.jsx)(K.a,{type:"text",name:"state",id:"state",value:t.billing_state,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"pincode",children:"Pincode"}),Object(n.jsx)(K.a,{type:"text",name:"pincode",id:"pincode",value:t.billing_pincode,readOnly:!0})]})})]}),Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"card",children:"Card Id"}),Object(n.jsx)(K.a,{type:"text",name:"card",id:"card",value:t.card,readOnly:!0})]})})}),Object(n.jsx)(J.a,{color:"success",onClick:function(){return e.props.selectCustomer(t,e.toggleModal)},children:"Select Customer"})]}):Object(n.jsxs)(V.a,{onSubmit:function(a){return e.handleFormSubmit(a,t.id)},children:[Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"phone",children:"Phone"}),Object(n.jsx)(K.a,{type:"text",name:"phone",id:"phone",value:t.phone,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"name",children:"Name"}),Object(n.jsx)(K.a,{type:"text",name:"name",id:"name",onChange:e.handleInputChange})]})})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"address",children:"Address"}),Object(n.jsx)(K.a,{type:"textarea",name:"address",id:"address",onChange:e.handleInputChange})]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"city",children:"City"}),Object(n.jsx)(K.a,{type:"text",name:"city",id:"city",onChange:e.handleInputChange})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"state",children:"Force Name"}),Object(n.jsx)(K.a,{type:"text",name:"state",id:"state",onChange:e.handleInputChange})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"pincode",children:"Pincode"}),Object(n.jsx)(K.a,{type:"text",name:"pincode",id:"pincode",onChange:e.handleInputChange})]})})]}),Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"card",children:"Card Id"}),Object(n.jsx)(K.a,{type:"text",name:"card",id:"card",onChange:e.handleInputChange})]})})}),Object(n.jsx)(J.a,{color:"success",children:"Submit Customer"})]})},e}return Object(q.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{onSubmit:this.addNewCustomer,children:[Object(n.jsx)(Ge,{handleChange:this.handlePhoneChange,intialValue:this.state.phone}),Object(n.jsx)("div",{style:{display:"block",color:"red",fontSize:"12px"},children:this.state.phoneError}),Object(n.jsx)(J.a,{color:"success",className:"text-uppercase mt-2",size:"sm",block:!0,onClick:this.addNewCustomer,children:"add new customer"})]}),Object(n.jsxs)(qe.a,{isOpen:this.state.isOpen,toggle:this.toggleModal,backdrop:"static",children:[Object(n.jsx)(Be.a,{children:"Add New Customer"}),Object(n.jsx)(Ue.a,{children:this.renderForm()})]})]})}}]),a}(c.Component),Ve=Object(l.b)((function(e){return{customer:e.customer}}),{searchCustomerByPhone:function(e,t){return function(){var a=Object(te.a)(ee.a.mark((function a(n){var c;return ee.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne.post("search-customer",{phone:e});case 3:c=a.sent,n({type:f,payload:c.data.searched_customer}),t(),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},updateCustomer:function(e,t,a){var n=t.name,c=t.address,r=t.city,s=t.state,i=t.pincode,l=t.card;return function(){var t=Object(te.a)(ee.a.mark((function t(o){var d;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.put("update-customer/".concat(e),{name:n,billing_address:c,billing_city:r,billing_state:s,billing_pincode:i,card:l});case 3:d=t.sent,o({type:y,payload:d.data.selected_customer}),a(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},selectCustomer:function(e,t){return t(),{type:f,payload:e}}})(He);a(161);var We=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={value:"",suggestions:[]},e.onChange=function(t){e.setState({value:t.target.value})},e.handleKeyDown=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=10;break}if(n=a.target.value,c=e.props.customerType,e.props.cart.items.find((function(e){return e.product_code===n}))){t.next=9;break}return t.next=7,e.searchProduct(n,c);case 7:r=t.sent,e.props.addToCart(r);case 9:e.setState({value:""});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchProduct=function(){var e=Object(te.a)(ee.a.mark((function e(t,a){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.post("search-single-item",{product_code:t,customerType:a});case 2:return n=e.sent,e.abrupt("return",n.data.item);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),e.onSuggestionsFetchRequested=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.value,t.prev=1,t.next=4,ne.post("search-list",{q:n});case 4:c=t.sent,e.setState({suggestions:c.data.searched_items}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e}return Object(q.a)(a,[{key:"getSuggestions",value:function(e){var t=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(""===t)return[];var a=new RegExp("^"+t,"i");return this.state.suggestions.filter((function(e){return a.test(e.product_name)||a.test(e.product_code)}))}},{key:"getSuggestionValue",value:function(e){return e.product_name}},{key:"renderSuggestion",value:function(e){return Object(n.jsx)("span",{children:e.product_name})}},{key:"render",value:function(){var e=this.state,t=e.value;e.suggestions;return Object(n.jsx)("input",{placeholder:"Search product by code",value:t,autoFocus:!0,className:"form-control",onChange:this.onChange,onKeyDown:this.handleKeyDown})}}]),a}(c.Component),Qe=Object(l.b)((function(e){return{cart:e.cart,customerType:e.auth.authenticated.user.type}}),{addToCart:function(e){var t=Object(h.a)(Object(h.a)({},e),{},{discount:0,price:0,qty:1});return delete t.created_at,delete t.updated_at,{type:x,payload:t}}})(We);function Ke(e){var t=function(t){Object(B.a)(c,t);var a=Object(U.a)(c);function c(){return Object(E.a)(this,c),a.apply(this,arguments)}return Object(q.a)(c,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){console.log(this.props.auth),this.props.updateURL(this.props.currentURL),this.props.auth.isLoggedIn||this.props.history.push("/login")}},{key:"render",value:function(){return Object(n.jsx)(e,Object(h.a)({},this.props))}}]),c}(c.Component);return Object(l.b)((function(e,t){return{auth:e.auth.authenticated,currentURL:t.location.pathname}}),{updateURL:se})(t)}var Je=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:{headMessage:"",bodyMessage:[],messageColor:""},latestSales:[]},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.get("last-customers");case 3:a=t.sent,e.setState({latestSales:a.data.latestSales}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.removeFromCart=function(t){var a=e.props.cart.items.filter((function(e){return e.id!==t}));e.props.updateCart(a)},e.updateQty=function(t,a){e.getItemFromIdAndCalculatePrice(a,t.target.value)},e.getItemFromIdAndCalculatePrice=function(t,a){var n=e.props.cart.items;n[t].qty=Number(a);var c=Number(n[t].sale_price*n[t].qty).toFixed(2);n[t].price=c,console.log("items",n);var r=Object(j.a)(n);e.props.updateCartItem(r)},e.renderTableBody=function(){var t=e.props.cart;return t.items.length?t.items.map((function(t,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(){return e.removeFromCart(t.id)},className:"btn btn-danger btn-sm",children:Object(n.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})})}),Object(n.jsx)("td",{children:a+1}),Object(n.jsx)("td",{children:t.product_code}),Object(n.jsx)("td",{children:t.product_name}),Object(n.jsx)("td",{children:t.mrp}),Object(n.jsx)("td",{children:t.sale_price}),Object(n.jsx)("td",{children:t.gst+"%"}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"number",className:"form-control",min:"0",onChange:function(t){return e.updateQty(t,a)},value:t.qty})}),Object(n.jsx)("td",{children:t.price})]},t.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"10",className:"text-center",children:"No Item in cart."})})},e.calculatedGst=function(e){var t=e.sale_price,a=e.gst,n=e.qty,c=Number(t-t*(100/(100+parseFloat(a)))).toFixed(2);return e.calculated_gst=c,Number(c*n).toFixed(2)},e.handleInvoiceSubmit=function(){e.props.createInvoice(e.props.cart,e.props.customer,(function(t){return e.props.history.push("invoice/".concat(t))}),(function(t){e.setState({message:t})}))},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cart,c=t.customer;return Object(n.jsxs)(Ae,{children:[Object(n.jsx)(Ee,{latestSales:this.state.latestSales,children:Object(n.jsx)(Ve,{})},"side"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)(W.a,{children:Object(n.jsx)(Qe,{})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:c.name&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Party"}),": ",c.name,","," ","+91"+c.phone]}),Object(n.jsxs)("p",{children:[c.billing_address,", ",c.billing_city," ",c.billing_state," - ",c.billing_pincode]})]})}),Object(n.jsx)("div",{style:{maxHeight:"58vh",overflowX:"hidden",overflowY:"scroll"},children:Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Action"}),Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Product Code"}),Object(n.jsx)("th",{children:"Product Name"}),Object(n.jsx)("th",{children:"MRP"}),Object(n.jsx)("th",{children:"Sale Price"}),Object(n.jsx)("th",{children:"GST"}),Object(n.jsx)("th",{children:"Qty"}),Object(n.jsx)("th",{children:"Price"})]})}),Object(n.jsx)("tbody",{children:this.renderTableBody()})]})}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{children:Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"mode_of_payment",children:"Payment Mode"}),Object(n.jsxs)(K.a,{type:"select",id:"mode_of_payment",name:"payment_mode",onChange:function(t){return e.props.updateCartModeOfPayment(t.target.value)},children:[Object(n.jsx)("option",{value:"cash",children:"Cash Payment"}),Object(n.jsx)("option",{value:"bank",children:"Bank Payment"}),Object(n.jsx)("option",{value:"credit",selected:a.amount_repay>0,children:"Credit"})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"total_amount",children:"Total Amount"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"Rs"})}),Object(n.jsx)(K.a,{id:"total_amount",name:"total_amount",value:a.total_amount,onChange:function(t){return e.props.updateCartTotalAmount(t.target.value)},readOnly:!0})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"amount_paid",children:"Amount Paid"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"Rs"})}),Object(n.jsx)(K.a,{id:"amount_paid",name:"amount_paid",value:a.amount_paid,onChange:function(t){return e.props.updateCartAmountPaid(t.target.value)}})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"amount_repay",style:{color:"red"},children:"Amount Repay"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"Rs"})}),Object(n.jsx)(K.a,{id:"amount_repay",name:"amount_repay",value:a.amount_repay,onChange:function(t){return e.props.updateCartAmountRepay(t.target.value)},readOnly:!0})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(J.a,{color:"success",className:"mt-3",size:"md",disabled:a.total_amount<=0,onClick:this.handleInvoiceSubmit,children:["Continue To Invoice"," ",Object(n.jsx)("i",{class:"fa fa-arrow-right","aria-hidden":"true"})]}),Object(n.jsx)("span",{style:{color:this.state.message.messageColor,fontSize:"12px"},className:"ml-3",children:this.state.message.bodyMessage[0]})]})]})})]})},"main")]})}}]),a}(c.Component),$e=Object(l.b)((function(e){return{cart:e.cart,customer:e.customer}}),{updateCart:function(e){return{type:O,payload:e}},updateCartItem:function(e){return{type:g,payload:e}},updateCartModeOfPayment:function(e){return{type:S,payload:e}},updateCartTotalAmount:function(e){return{type:C,payload:e}},updateCartAmountRepay:function(e){return{type:w,payload:e}},updateCartAmountPaid:function(e){return{type:N,payload:e}},updateCartDiscount:function(e){return{type:D,payload:e}},createInvoice:function(e,t,a){return function(){var n=Object(te.a)(ee.a.mark((function n(c){var r,s,i,l,o,d,j;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e.items,s=e.payment_mode,i=e.total_amount,l=e.amount_repay,o=e.amount_paid,d=e.discount,n.next=4,ne.post("create-invoice",{items:JSON.stringify(r),payment_mode:s,total_amount:i,amount_repay:l,amount_paid:o,discount:d,customer_id:t.id});case 4:return j=n.sent,c({type:I,payload:""}),c({type:P}),n.abrupt("return",a(j.data.sale.id));case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},clearCart:function(){return{type:I,payload:""}}})(Ke(Je)),Xe=a(185),Ze=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,phone:"",phoneError:"",name:"",address:"",city:"",state:"",pincode:""},e.toggleModal=function(){e.setState((function(e){return{isOpen:!e.isOpen}}))},e.handlePhoneChange=function(t){e.setState({phone:t.target.value,phoneError:""})},e.addNewParty=function(){e.state.phone?e.props.searchPartyByPhone(e.state.phone,e.toggleModal):e.setState({phoneError:"Party Mobile Number is required"})},e.handleInputChange=function(t){e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleFormSubmit=function(t,a){t.preventDefault(),e.props.updateParty(a,e.state,e.toggleModal)},e.renderForm=function(){var t=e.props.party;return t.name&&t.billing_address&&t.billing_city&&t.billing_state&&t.billing_pincode?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"phone",children:"Phone"}),Object(n.jsx)(K.a,{type:"text",name:"phone",id:"phone",value:t.phone,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"name",children:"Name"}),Object(n.jsx)(K.a,{type:"text",name:"name",id:"name",value:t.name,readOnly:!0})]})})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"address",children:"Address"}),Object(n.jsx)(K.a,{type:"textarea",name:"address",id:"address",value:t.billing_address,readOnly:!0})]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"city",children:"City"}),Object(n.jsx)(K.a,{type:"text",name:"city",id:"city",value:t.billing_city,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"state",children:"State"}),Object(n.jsx)(K.a,{type:"text",name:"state",id:"state",value:t.billing_state,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"pincode",children:"Pincode"}),Object(n.jsx)(K.a,{type:"text",name:"pincode",id:"pincode",value:t.billing_pincode,readOnly:!0})]})})]}),Object(n.jsx)(J.a,{color:"success",onClick:function(){return e.props.selectParty(t,e.toggleModal)},children:"Select Party"})]}):Object(n.jsxs)(V.a,{onSubmit:function(a){return e.handleFormSubmit(a,t.id)},children:[Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"phone",children:"Phone"}),Object(n.jsx)(K.a,{type:"text",name:"phone",id:"phone",value:t.phone,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"name",children:"Name"}),Object(n.jsx)(K.a,{type:"text",name:"name",id:"name",onChange:e.handleInputChange})]})})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"address",children:"Address"}),Object(n.jsx)(K.a,{type:"textarea",name:"address",id:"address",onChange:e.handleInputChange})]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"city",children:"City"}),Object(n.jsx)(K.a,{type:"text",name:"city",id:"city",onChange:e.handleInputChange})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"state",children:"State"}),Object(n.jsx)(K.a,{type:"text",name:"state",id:"state",onChange:e.handleInputChange})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"pincode",children:"Pincode"}),Object(n.jsx)(K.a,{type:"text",name:"pincode",id:"pincode",onChange:e.handleInputChange})]})})]}),Object(n.jsx)(J.a,{color:"success",children:"Submit Party"})]})},e}return Object(q.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"+91"})}),Object(n.jsx)(K.a,{placeholder:"Party Mobile Number",maxLength:"10",value:this.state.phone,onChange:this.handlePhoneChange})]}),Object(n.jsx)("div",{style:{display:"block",color:"red",fontSize:"12px"},children:this.state.phoneError}),Object(n.jsx)(J.a,{color:"success",className:"text-uppercase mt-2",size:"sm",block:!0,onClick:this.addNewParty,children:"add new party"}),Object(n.jsxs)(qe.a,{isOpen:this.state.isOpen,toggle:this.toggleModal,children:[Object(n.jsx)(Be.a,{toggle:this.toggleModal,children:"Add New Party"}),Object(n.jsx)(Ue.a,{children:this.renderForm()})]})]})}}]),a}(c.Component),et=Object(l.b)((function(e){return{party:e.party}}),{searchPartyByPhone:ie,updateParty:le,selectParty:oe})(Ze),tt=null,at=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={product_code:"",product_name:"",hsn:"",image:"",brand:"",wholesale_percent:"",retail_percent:"",gst:"",message:"",loading:!1},e.handleChange=function(t){"file"===t.target.type&&(e.setState(Object(G.a)({},t.target.name,t.target.files[0])),tt=t.target.files[0]),e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s,i,l,o,d,j;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(e.state),e.setState({loading:!0,message:""}),n=e.state,c=n.product_code,r=n.product_name,s=n.hsn,n.image,i=n.brand,l=n.wholesale_percent,o=n.retail_percent,d=n.gst,(j=new FormData).append("product_code",c),j.append("product_name",r),j.append("hsn",s||""),j.append("image",tt||""),j.append("brand",i||""),j.append("wholesale_percent",l),j.append("retail_percent",o),j.append("gst",d),t.prev=13,t.next=16,ne.post("add-fix-item",j,{headers:{"content-type":"multipart/form-data"}});case 16:e.setState({message:"Item added successfully",loading:!1,retail_percent:"",wholesale_percent:"",gst:"",image:"",hsn:"",product_name:"",product_code:""}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(13),e.setState({message:t.t0.response.data.message,loading:!1});case 22:case"end":return t.stop()}}),t,null,[[13,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.product_code,a=e.product_name,c=e.hsn,r=e.brand,s=e.wholesale_percent,i=e.retail_percent,l=e.gst,o=e.message,d=e.loading;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(qe.a,{isOpen:this.props.isOpen,toggle:this.props.toggle,fullscreen:!0,size:"lg",children:[Object(n.jsx)(Be.a,{toggle:this.props.toggle,children:"Add Item"}),Object(n.jsxs)(Ue.a,{children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Code"}),Object(n.jsx)(K.a,{type:"text",name:"product_code",value:t,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Name"}),Object(n.jsx)(K.a,{type:"text",name:"product_name",value:a,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"HSN"}),Object(n.jsx)(K.a,{type:"text",name:"hsn",value:c,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Image"}),Object(n.jsx)(K.a,{type:"file",name:"image",onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Brand"}),Object(n.jsx)(K.a,{type:"text",name:"brand",value:r,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Wholesale % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"wholesale_percent",value:s,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Retail % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"retail_percent",value:i,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"GST %"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"gst",value:l,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})})]}),Object(n.jsx)(J.a,{color:"success",className:"mt-3",size:"sm",onClick:this.handleSubmit,disabled:d,children:"Add Item"}),Object(n.jsx)("span",{children:o})]})]})})}}]),a}(c.Component),nt=Object(l.b)((function(e){return{party:e.party}}),{searchPartyByPhone:ie,updateParty:le,selectParty:oe})(at),ct="e",rt="i",st=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={tableData:[{key:Object(Xe.a)(),product_code:"",product_name:"",hsn:"",image:"",ws_margin:"",r_margin:"",mrp:0,unit_cost:0,discount:0,final_unit_cost:0,unit_cost_with_gst:0,sale_price:0,whole_sale_price:0,sale_price_to_mrp:"",whole_sale_price_to_mrp:"",gst:0,expiry:new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().slice(0,10),mfg:(new Date).toISOString().slice(0,10),qty:0,total_cost:0}],payment_mode:"",total_amount:0,amount_repay:0,amount_paid:0,discount:"",tax_type:ct,message:{headMessage:"",bodyMessage:[],messageColor:""},addItem:!1},e.setAddItem=function(){e.setState((function(e){return{addItem:!e.addItem}}))},e.deleteRow=function(t){var a=e.state.tableData.filter((function(e){return e.key!==t})),n=a.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.total_cost)).toFixed(2)}),0);e.setState({tableData:a,total_amount:n})},e.addRow=function(){var t=e.state.tableData,a=[].concat(Object(j.a)(t),[{key:Object(Xe.a)(),product_code:"",product_name:"",hsn:"",image:"",ws_margin:"",r_margin:"",mrp:0,unit_cost:0,discount:0,final_unit_cost:0,unit_cost_with_gst:0,sale_price:0,whole_sale_price:0,sale_price_to_mrp:"",whole_sale_price_to_mrp:"",gst:0,expiry:new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().slice(0,10),mfg:(new Date).toISOString().slice(0,10),qty:0,total_cost:0}]);e.setState({tableData:a})},e.handleInput=function(t,a){e.formInputs(t,a)},e.setTaxType=function(t,a){e.setState({tax_type:a},(function(){return e.setSalePriceForAllItems(a)}))},e.calculateTotalCost=function(e,t,a,n){if(n===rt)return Number(e*t).toFixed(2);var c=a*e/100;return Number((Number(e)+Number(c))*t).toFixed(2)},e.setSalePriceForAllItems=function(t){var a=e.state.tableData.map((function(a){return a.sale_price=e.calculateSalePrice(t,a.unit_cost,a.r_margin,a.gst),a.whole_sale_price=e.calculateWholeSalePrice(t,a.unit_cost,a.ws_margin,a.gst),a.sale_price_to_mrp=e.calculateSaleProfitPercent(a.mrp,a.sale_price),a.whole_sale_price_to_mrp=e.calculateWholeSaleProfitPercent(a.mrp,a.whole_sale_price),a.total_cost=e.calculateTotalCost(a.unit_cost,a.qty,a.gst,t),a}));e.setState({tableData:a})},e.calculateSalePrice=function(e,t,a,n){if(e===ct){var c=Number(t)+a*t/100;return c+n*c/100}var r=Number(Number(t)-Number(t)*(100/(100+parseFloat(n)))).toFixed(2),s=t-r;return Number(Number(s)+a*s/100+Number(r)).toFixed(2)},e.calculateWholeSalePrice=function(e,t,a,n){if(e===ct){var c=Number(t)+a*t/100;return c+n*c/100}var r=Number(Number(t)-Number(t)*(100/(100+parseFloat(n)))).toFixed(2),s=t-r;return Number(Number(s)+a*s/100+Number(r)).toFixed(2)},e.formInputs=function(t,a){var n=e.state,c=n.tableData,r=n.tax_type;c[a][t.target.name]=t.target.value,"unit_cost"!==t.target.name&&"gst"!==t.target.name||(c[a].sale_price=e.calculateSalePrice(r,c[a].unit_cost,c[a].r_margin,c[a].gst),c[a].whole_sale_price=e.calculateWholeSalePrice(r,c[a].unit_cost,c[a].ws_margin,c[a].gst)),"mrp"===t.target.name&&(c[a].sale_price_to_mrp=e.calculateSaleProfitPercent(c[a].mrp,c[a].sale_price),c[a].whole_sale_price_to_mrp=e.calculateWholeSaleProfitPercent(c[a].mrp,c[a].whole_sale_price)),"unit_cost"!==t.target.name&&"discount"!==t.target.name||(c[a].final_unit_cost=e.calculateFinalUnitCost(c[a].unit_cost,c[a].discount)),"unit_cost"!==t.target.name&&"qty"!==t.target.name||(c[a].total_cost=e.calculateTotalCost(c[a].final_unit_cost,c[a].qty,c[a].gst,r));var s=Object(j.a)(c),i=s.reduce((function(e,t){return Number(parseFloat(e)+parseFloat(t.total_cost)).toFixed(2)}),0);e.setState({tableData:s,total_amount:i})},e.calculateSaleProfitPercent=function(e,t){var a=Number(e-t).toFixed(2);return Number(100*a/e).toFixed(1)},e.calculateWholeSaleProfitPercent=function(e,t){var a=Number(e-t).toFixed(2);return Number(100*a/e).toFixed(1)},e.calculateFinalUnitCost=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e-e*t/100;return Number(a).toFixed(2)},e.handlePayment=function(t){e.setState(Object(G.a)({},t.target.name,t.target.value),(function(){if("amount_paid"===t.target.name){var a=e.state.amount_paid||0,n=Number(parseFloat(e.state.total_amount)-parseFloat(a)).toFixed(2);e.setState({amount_repay:n})}}))},e.handleBillSubmit=function(){e.props.createBill(e.state,e.props.party,(function(t){e.setState({tableData:[{key:Object(Xe.a)(),product_code:"",product_name:"",hsn:"",image:"",ws_margin:"",r_margin:"",mrp:0,unit_cost:0,discount:0,final_unit_cost:0,unit_cost_with_gst:0,sale_price:0,whole_sale_price:0,sale_price_to_mrp:"",whole_sale_price_to_mrp:"",gst:0,expiry:new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().slice(0,10),mfg:(new Date).toISOString().slice(0,10),qty:0,total_cost:0}],payment_mode:"",total_amount:0,amount_repay:0,amount_paid:0,discount:"",tax_type:ct,message:t})}),(function(t){e.setState({message:t})}))},e.searchFixItem=function(){var e=Object(te.a)(ee.a.mark((function e(t){var a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.get("/get-fix-item?product_code=".concat(t));case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data.item);case 8:e.prev=8,e.t0=e.catch(0),new Promise((function(e,t){return t("Error while fetching item")}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),e.handleKeyDown=function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var c,r,s,i;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=22;break}return c=a.target.value,t.prev=2,t.next=5,e.searchFixItem(c);case 5:r=t.sent,console.log(r),(s=e.state.tableData)[n].product_code=r.product_code,s[n].product_name=r.product_name,s[n].hsn=r.hsn,s[n].image=r.full_image_path,s[n].ws_margin=r.ws_margin,s[n].r_margin=r.r_margin,s[n].gst=r.gst,i=Object(j.a)(s),e.setState({tableData:i}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"render",value:function(){var e=this,t=this.props.party;return Object(n.jsxs)(_e,{children:[Object(n.jsx)(Ee,{children:Object(n.jsx)(et,{})},"side-left"),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)(J.a,{onClick:this.setAddItem,children:"Add Item"})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:t.name&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Party"}),": ",t.name,", ","+91"+t.phone]}),Object(n.jsxs)("p",{children:[t.billing_address,", ",t.billing_city," ",t.billing_state," - ",t.billing_pincode]})]})})]},"side-right"),Object(n.jsxs)("main",{className:"card border-dark",children:[Object(n.jsxs)("div",{class:"card-header bg-dark text-light",children:[Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"radio",checked:this.state.tax_type===rt,onChange:function(t){return e.setTaxType(t,rt)}})," ","Inclusive of Tax?"]}),"\xa0\xa0\xa0",Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"radio",checked:this.state.tax_type===ct,onChange:function(t){return e.setTaxType(t,ct)}})," ","Exclusive of Tax?"]})]}),Object(n.jsxs)("div",{className:"card-body",children:[this.state.tableData.map((function(t,a){return Object(n.jsxs)("div",{className:"card mb-3",children:[Object(n.jsxs)("div",{className:"card-header d-flex justify-content-between bg-info text-light",children:[Object(n.jsxs)("strong",{className:"w-80",children:["#",a+1]}),Object(n.jsx)("button",{onClick:function(){return e.deleteRow(t.key)},className:"btn btn-danger btn-sm",children:Object(n.jsx)("i",{class:"fa fa-times","aria-hidden":"true"})})]}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:t.image&&Object(n.jsx)("img",{className:"img-thumbnail mx-auto d-block",src:t.image,alt:"product",style:{width:"60%"}})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Product Code"}),Object(n.jsx)("input",{name:"product_code",className:"form-control form-control-sm",value:t.product_code,onChange:function(t){return e.handleInput(t,a)},onKeyDown:function(t){return e.handleKeyDown(t,a)},tabIndex:a})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Product Name"}),Object(n.jsx)("input",{name:"product_name",className:"form-control form-control-sm",value:t.product_name,onChange:function(t){return e.handleInput(t,a)},readOnly:!0,tabIndex:"-1"})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"HSN"}),Object(n.jsx)("input",{name:"hsn",className:"form-control form-control-sm",value:t.hsn,onChange:function(t){return e.handleInput(t,a)},readOnly:!0,tabIndex:"-1"})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"GST"}),Object(n.jsx)("input",{name:"gst",className:"form-control form-control-sm",value:t.gst,onChange:function(t){return e.handleInput(t,a)},readOnly:!0,tabIndex:"-1"})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Sale Price"}),Object(n.jsx)("input",{name:"sale_price",className:"form-control form-control-sm",value:t.sale_price,onChange:function(t){return e.handleInput(t,a)},readOnly:!0,tabIndex:"-1"}),Object(n.jsx)("span",{children:t.sale_price_to_mrp&&(t.sale_price_to_mrp>0?Object(n.jsx)("span",{style:{fontSize:12,color:"green"},children:t.sale_price_to_mrp+"% less than MRP"}):Object(n.jsx)("span",{style:{fontSize:12,color:"red"},children:Math.abs(t.sale_price_to_mrp)+"% more than MRP"}))})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Wholesale Price"}),Object(n.jsx)("input",{name:"whole_sale_price",className:"form-control form-control-sm",value:t.whole_sale_price,onChange:function(t){return e.handleInput(t,a)},readOnly:!0,tabIndex:"-1"}),Object(n.jsx)("span",{children:t.whole_sale_price_to_mrp&&(t.whole_sale_price_to_mrp>0?Object(n.jsx)("span",{style:{fontSize:12,color:"green"},children:t.whole_sale_price_to_mrp+"% less than MRP"}):Object(n.jsx)("span",{style:{fontSize:12,color:"red"},children:Math.abs(t.whole_sale_price_to_mrp)+"% more than MRP"}))})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Unit Cost"}),Object(n.jsx)("input",{name:"unit_cost",className:"form-control form-control-sm",value:t.unit_cost,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Discount"}),Object(n.jsx)("input",{name:"discount",className:"form-control form-control-sm",value:t.discount,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Final Cost"}),Object(n.jsx)("input",{name:"final_unit_cost",className:"form-control form-control-sm",value:t.final_unit_cost,onChange:function(t){return e.handleInput(t,a)},tabIndex:-1,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"MRP"}),Object(n.jsx)("input",{name:"mrp",className:"form-control form-control-sm",value:t.mrp,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Qty"}),Object(n.jsx)("input",{name:"qty",className:"form-control form-control-sm",value:t.qty,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)("label",{children:"Total Cost"}),Object(n.jsx)("div",{children:t.total_cost})]}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"MFG date"}),Object(n.jsx)("input",{type:"date",name:"mfg",className:"form-control form-control-sm",placeholder:"YYYY-mm-dd",value:t.mfg,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)("label",{children:"Expiry"}),Object(n.jsx)("input",{type:"date",name:"expiry",className:"form-control form-control-sm",placeholder:"YYYY-mm-dd",value:t.expiry,onChange:function(t){return e.handleInput(t,a)},tabIndex:a})]})})]})]})]},t.key)})),Object(n.jsx)("hr",{}),Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsx)(J.a,{onClick:this.addRow,color:"info",className:"mb-3",size:"sm",children:"Add New Row"})})}),Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"mode_of_payment",children:"Payment Mode"}),Object(n.jsxs)(K.a,{type:"select",id:"mode_of_payment",name:"payment_mode",onChange:this.handlePayment,children:[Object(n.jsx)("option",{value:"",children:"Select Payment"}),Object(n.jsx)("option",{value:"cash",children:"Cash Payment"}),Object(n.jsx)("option",{value:"bank",children:"Bank Payment"})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"total_amount",children:"Total Amount"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"Rs"})}),Object(n.jsx)(K.a,{id:"total_amount",name:"total_amount",value:this.state.total_amount,onChange:this.handlePayment})]})]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsx)(Q.a,{for:"amount_paid",children:"Amount Paid"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(Te.a,{addonType:"prepend",children:Object(n.jsx)(Fe.a,{children:"Rs"})}),Object(n.jsx)(K.a,{id:"amount_paid",name:"amount_paid",value:this.state.amount_paid,onChange:this.handlePayment})]})]})]}),Object(n.jsx)("br",{}),Object(n.jsx)(J.a,{color:"success",className:"mt-3",size:"sm",onClick:this.handleBillSubmit,children:"Continue To Bill"}),Object(n.jsx)("span",{style:{color:this.state.message.messageColor,fontSize:"12px;"},className:"ml-3",children:this.state.message.bodyMessage[0]})]}),Object(n.jsx)(nt,{isOpen:this.state.addItem,toggle:this.setAddItem})]},"main")]})}}]),a}(c.Component),it=Object(l.b)((function(e){return{party:e.party}}),{createBill:function(e,t,a,n){return function(){var c=Object(te.a)(ee.a.mark((function c(r){var s,i,l,o,d,j,h,u;return ee.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s=e.tableData,i=e.payment_mode,l=e.total_amount,o=e.amount_repay,d=e.amount_paid,j=e.discount,h=e.tax_type,c.next=4,ne.post("create-bill",{items:JSON.stringify(s),payment_mode:i,total_amount:l,amount_repay:o,amount_paid:d,discount:j,party_id:t.id,tax_type:h});case 4:u=c.sent,console.log(u.data),a({headMessage:"Success",bodyMessage:["Purchase created successfully"],messageColor:"green"}),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0),n({headMessage:"Failure",bodyMessage:["Failed to create purchase. Please try again"],messageColor:"red"});case 13:case"end":return c.stop()}}),c,null,[[0,9]])})));return function(e){return c.apply(this,arguments)}}()}})(st),lt=(a(76),function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).showDateFromTimeStamp=function(e){return new Date(e).toISOString().slice(0,10)},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){this.props.showInvoice(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.sale,t=e.customer,a=e.items;return console.log(t),Object(n.jsx)("div",{className:"w-100",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsxs)(z.b,{to:"/",className:"non-printable",children:["<<"," Go to Create Invoice"]}),Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h3",{className:"text-center font-weight-bold mb-1",children:"Incl. of Taxes"}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{className:"text-center font-weight-bold mb-0",children:"Ardh Sainik Canteen"}),Object(n.jsx)("p",{className:"text-center small font-weight-bold mb-0",children:"Karam Singh, Budhi Rd, Barnoti, Kathua - J&K"}),Object(n.jsx)("p",{className:"text-center small font-weight-bold mb-0",children:"GSTIN No.: 01DRSPP8834F1ZE"}),Object(n.jsx)("div",{className:"row pb-2 p-2",children:Object(n.jsxs)("div",{className:"col-md-12 sides",children:[Object(n.jsxs)("p",{className:"mb-0",children:[Object(n.jsxs)("span",{style:{width:"50%",display:"inline-block",textAlign:"left"},children:[Object(n.jsx)("strong",{children:"No."}),":"," ",Object(n.jsxs)("small",{className:"small",children:["IN00",e.id]})]}),Object(n.jsxs)("span",{style:{width:"50%",display:"inline-block",textAlign:"right"},children:[Object(n.jsx)("strong",{children:"Date"}),":"," ",Object(n.jsx)("small",{className:"small",children:e.created_at&&this.showDateFromTimeStamp(e.created_at)})]})]}),Object(n.jsxs)("p",{className:"mb-0",children:[Object(n.jsx)("strong",{children:"Name"}),":"," ",Object(n.jsxs)("small",{className:"small",children:[t.name,", +91",t.phone]})]})]})}),Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-bordered mb-0",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold non-printable",children:"SNo."}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Item"}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Qty"}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["MRP",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["Sale Price",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Tax %"}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["Total",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]})]})}),Object(n.jsx)("tbody",{children:a&&a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable",children:t+1}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.pivot.qty}),Object(n.jsx)("td",{children:e.mrp}),Object(n.jsx)("td",{children:e.sale_price}),Object(n.jsx)("td",{children:e.gst}),Object(n.jsx)("td",{children:e.pivot.price})]},e.id)}))}),Object(n.jsxs)("tfoot",{className:"font-weight-bold",children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"5",children:"Total Amount"}),Object(n.jsx)("td",{children:"Rs "+e.total_amount})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"5",children:"Payment Mode"}),Object(n.jsx)("td",{className:"text-uppercase",children:e.payment_mode||"No Payment"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"5",className:"small",children:"You have saved"}),Object(n.jsx)("td",{className:"font-weight-bold",children:a&&"Rs "+Number(a.reduce((function(e,t){return e+t.mrp*t.pivot.qty-t.sale_price*t.pivot.qty}),0)).toFixed(2)})]})]})]})}),Object(n.jsx)("p",{className:"font-weight-bold small mt-3 mb-1",children:"Terms & Conditions"}),Object(n.jsx)("p",{className:"mb-5 mt-0 small",children:"Items once sold. No Refund. No Exchange."}),Object(n.jsx)("p",{className:"font-weight-bold small mt-3 text-center",children:"Thanks! for supporting"}),Object(n.jsx)("p",{className:"font-weight-bold small mb-0 text-center",children:"Paramilitary Forces nation first for us."}),Object(n.jsx)("p",{className:"font-weight-bold small mb-0 text-center",children:"Initiative of Ardh Sainik Canteen (Regd.)"}),Object(n.jsx)("p",{className:"font-weight-bold small mb-0 text-center",children:"Phone: +91 6005133875"}),Object(n.jsx)("p",{className:"font-weight-bold small mb-0 text-center",children:"|| Jai Hind ||"})]})})]})})}}]),a}(c.Component)),ot=Object(l.b)((function(e){return{sale:e.sale}}),{showInvoice:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.get("invoice/".concat(e));case 3:n=t.sent,a({type:k,payload:n.data.sale}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(lt),dt=a(184),jt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={purchases:[],fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isLoading:!1,error:""},e.onAlertDismiss=function(){e.setState({error:""})},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.prev=1,t.next=4,ne.get("daily-purchase");case 4:a=t.sent,e.setState({purchases:a.data.purchases,isLoading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0.response.data.error,isLoading:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0}),t.prev=3,t.next=6,ne.get("daily-purchase",{params:{from:c,to:r}});case 6:s=t.sent,e.setState({purchases:s.data.purchases,isLoading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({error:t.t0.response.data.error,isLoading:!1});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCancelBill=function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var c,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.state.purchases,t.prev=1,t.next=4,ne.put("cancel-bill/".concat(n));case 4:r=c.filter((function(e){return e.id!==n})),e.setState({purchases:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0.response.data.error});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.purchases,c=t.isLoading,r=e.props.auth;return c?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(t,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:a+1}),Object(n.jsx)("td",{children:Object(n.jsx)(z.b,{to:"/bill/".concat(t.id),children:"BI00"+t.id})}),Object(n.jsx)("td",{children:t.party.name}),Object(n.jsx)("td",{children:t.payment_mode}),Object(n.jsx)("td",{children:t.total_amount}),r.permission&&"all"===r.permission.name&&Object(n.jsx)("td",{children:Object(n.jsx)(J.a,{color:"danger",onClick:function(a){return e.handleCancelBill(a,t.id)},children:"Cancel"})})]},t.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"6",className:"text-center",children:"No Purchase"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"4",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.total_amount}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate,c=this.props.auth;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Daily Purchase Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsx)(J.a,{hidden:!0,children:"Search"})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsx)(dt.a,{color:"danger",isOpen:this.state.error,toggle:this.onAlertDismiss,children:this.state.error}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Bill #"}),Object(n.jsx)("th",{children:"Party"}),Object(n.jsx)("th",{children:"Payment Mode"}),Object(n.jsx)("th",{children:"Total Amount"}),c.permission&&"all"===c.permission.name&&Object(n.jsx)("th",{children:"Action"})]})}),this.renderTableBody()]})]})},"main")]})}}]),a}(c.Component),ht=Object(l.b)((function(e){return{auth:e.auth.authenticated}}))(Ke(jt)),ut=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={sales:[],fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isLoading:!1,error:""},e.onAlertDismiss=function(){e.setState({error:""})},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.prev=1,t.next=4,ne.get("daily-sale");case 4:a=t.sent,e.setState({sales:a.data.sales,isLoading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0.response.data.error,isLoading:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0}),t.prev=3,t.next=6,ne.get("daily-sale",{params:{from:c,to:r}});case 6:s=t.sent,e.setState({sales:s.data.sales,isLoading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({error:t.t0.response.data.error,isLoading:!1});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCancelInvoice=function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var c,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.state.sales,t.prev=1,t.next=4,ne.put("cancel-invoice/".concat(n));case 4:r=c.filter((function(e){return e.id!==n})),e.setState({sales:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0.response.data.error,isLoading:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.sales,c=t.isLoading,r=e.props.auth;return c?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(t,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:a+1}),Object(n.jsx)("td",{children:Object(n.jsx)(z.b,{to:"/invoice/".concat(t.id),children:"IN00"+t.id})}),Object(n.jsx)("td",{children:t.customer.name}),Object(n.jsx)("td",{children:t.payment_mode}),Object(n.jsx)("td",{children:t.total_amount}),r.permission&&"all"===r.permission.name&&Object(n.jsx)("td",{children:Object(n.jsx)(J.a,{color:"danger",onClick:function(a){return e.handleCancelInvoice(a,t.id)},children:"Cancel"})})]},t.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"6",className:"text-center",children:"No Sale"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"4",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.total_amount}),0)).toFixed(2)}),r.permission&&"all"===r.permission.name&&Object(n.jsx)("th",{})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate,c=this.props.auth;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Daily Sale Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsx)(dt.a,{color:"danger",isOpen:this.state.error,toggle:this.onAlertDismiss,children:this.state.error}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Invoice #"}),Object(n.jsx)("th",{children:"Customer"}),Object(n.jsx)("th",{children:"Payment Mode"}),Object(n.jsx)("th",{children:"Total Amount"}),c.permission&&"all"===c.permission.name&&Object(n.jsx)("th",{children:"Action"})]})}),this.renderTableBody()]})]})},"main")]})}}]),a}(c.Component),bt=Object(l.b)((function(e){return{auth:e.auth.authenticated}}))(Ke(ut)),pt=Ke(function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={sales:[],fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isLoading:!1},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("sale-profit");case 3:a=t.sent,e.setState({sales:a.data.sales,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0}),t.next=5,ne.get("sale-profit",{params:{from:c,to:r}});case 5:s=t.sent,e.setState({sales:s.data.sales,isLoading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.sales;return t.isLoading?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:Object(n.jsx)(z.b,{to:"/invoice/".concat(e.id),children:"IN00"+e.id})}),Object(n.jsx)("td",{children:Number(e.total_amount).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.profit).toFixed(2)})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",className:"text-center",children:"No Sale"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"2",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.profit}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Daily Sale Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsx)(J.a,{hidden:!0,children:"Search"})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Invoice #"}),Object(n.jsx)("th",{children:"Invoice Total"}),Object(n.jsx)("th",{children:"Total Profit"})]})}),this.renderTableBody()]})]})},"main")]})}}]),a}(c.Component)),mt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={customers:[],isLoading:!1},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("customers");case 3:a=t.sent,e.setState({customers:a.data.customers,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.renderTableBody=function(){var t=e.state,a=t.customers;return t.isLoading?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:Object(n.jsx)(z.b,{to:"customer/".concat(e.phone),children:e.phone})}),Object(n.jsx)("td",{children:Number(e.paid_total).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.credit_total).toFixed(2)}),Object(n.jsx)("td",{children:Object(n.jsxs)(z.b,{to:"/customers/".concat(e.id),children:["All Invoices"," ",Object(n.jsxs)("span",{style:{fontSize:12},children:["(",e.sales.length||0,")"]})]})})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"6",className:"text-center",children:"No Customer"})})})})},e}return Object(q.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Customer List"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Phone"}),Object(n.jsx)("th",{children:"Total Paid"}),Object(n.jsx)("th",{children:"Total Credit"}),Object(n.jsx)("th",{})]})}),this.renderTableBody()]})})},"main")]})}}]),a}(c.Component),xt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={customer:""},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a,n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.phone,t.next=3,ne.post("search-customer",{phone:a});case 3:n=t.sent,e.setState({customer:n.data.searched_customer});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState({customer:Object(h.a)(Object(h.a)({},e.state.customer),{},Object(G.a)({},t.target.name,t.target.value))})},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.customer,t.next=4,ne.put("update-customer/".concat(n.id),{name:n.name,billing_address:n.billing_address,billing_city:n.billing_city,billing_state:n.billing_state,billing_pincode:n.billing_pincode});case 4:t.sent,e.props.history.push("/customers");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state.customer;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Edit Customer"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(V.a,{onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"phone",children:"Phone"}),Object(n.jsx)(K.a,{type:"text",name:"phone",value:e&&e.phone,readOnly:!0})]})}),Object(n.jsx)(Ie.a,{md:6,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"name",children:"Name"}),Object(n.jsx)(K.a,{type:"text",name:"name",onChange:this.handleChange,value:e&&e.name})]})})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"address",children:"Address"}),Object(n.jsx)(K.a,{type:"textarea",name:"billing_address",onChange:this.handleChange,value:e&&e.billing_address})]}),Object(n.jsxs)(ke.a,{form:!0,children:[Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"city",children:"City"}),Object(n.jsx)(K.a,{type:"text",name:"billing_city",onChange:this.handleChange,value:e&&e.billing_city})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"state",children:"State"}),Object(n.jsx)(K.a,{type:"text",name:"billing_state",onChange:this.handleChange,value:e&&e.billing_state})]})}),Object(n.jsx)(Ie.a,{md:4,children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"pincode",children:"Pincode"}),Object(n.jsx)(K.a,{type:"text",name:"billing_pincode",onChange:this.handleChange,value:e&&e.billing_pincode})]})})]}),Object(n.jsx)(ke.a,{children:Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"card",children:"Card Id"}),Object(n.jsx)(K.a,{type:"text",name:"card",onChange:this.handleChange,value:e&&e.card})]})})}),Object(n.jsx)(J.a,{color:"success",size:"sm",children:"Update Customer"})]})})},"main")]})}}]),a}(c.Component),Ot=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={expenses:[],amount:"",type:"",date:"",description:"",fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isEditing:!1,editingId:"",isLoading:!1},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("expenses");case 3:a=t.sent,e.setState({expenses:a.data.expenses,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name,c=a.value;"date"===n&&(c=new Date(c).toISOString().slice(0,10)),e.setState(Object(G.a)({},n,c))},e.handleCancelExpense=function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var c,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.state.expenses,t.next=3,ne.put("cancel-expense/".concat(n));case 3:r=c.filter((function(e){return e.id!==n})),e.setState({sales:r});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleEditClick=function(t,a){t.preventDefault();var n=e.state.expenses.find((function(e){return e.id===a}));e.setState({amount:n.amount,type:n.type,date:n.date,description:n.description,isEditing:!0,editingId:a})},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s,i,l,o,d,j;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.amount,r=n.type,s=n.date,i=n.description,l=n.isEditing,o=n.editingId,d=l?"edit-expense/".concat(o):"create-expense",t.prev=3,t.next=6,ne.post(d,{amount:c,type:r,date:s,description:i});case 6:return t.next=8,ne.get("expenses");case 8:j=t.sent,e.setState({expenses:j.data.expenses,amount:"",type:"",date:"",description:"",isEditing:!1,editingId:""}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.expenses,c=t.isLoading,r=e.props.auth;return c?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(t,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:a+1}),Object(n.jsx)("td",{children:t.date}),Object(n.jsx)("td",{children:t.type}),Object(n.jsx)("td",{children:t.amount}),"all"===r.permission.name&&Object(n.jsxs)("td",{children:[Object(n.jsx)(J.a,{color:"danger",onClick:function(a){return e.handleCancelExpense(a,t.id)},children:"Cancel"})," ",Object(n.jsx)(J.a,{color:"primary",onClick:function(a){return e.handleEditClick(a,t.id)},children:"Edit"})]})]},t.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",className:"text-center",children:"No Expense"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"3",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.amount}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.amount,a=e.date,c=e.type,r=e.description,s=this.props.auth;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Expense Report"})},"sidebar"),Object(n.jsxs)("main",{children:[Object(n.jsx)("div",{className:"card mb-3",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"amount",children:"Amount"}),Object(n.jsx)(K.a,{type:"number",name:"amount",id:"amount",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"date",children:"Date"}),Object(n.jsx)(K.a,{type:"date",name:"date",id:"date",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"type",children:"Type"}),Object(n.jsx)(K.a,{type:"text",name:"type",id:"type",value:c,onChange:this.handleChange})]})," "]})]}),Object(n.jsx)(ke.a,{children:Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"description",children:"Description"}),Object(n.jsx)(K.a,{type:"textarea",name:"description",id:"description",value:r,onChange:this.handleChange})]})," "]})}),Object(n.jsx)(J.a,{children:this.state.isEditing?"Update":"Submit"})]})})}),Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{children:"Type"}),Object(n.jsx)("th",{children:"Amount"}),"all"===s.permission.name&&Object(n.jsx)("th",{children:"Action"})]})}),this.renderTableBody()]})})})]},"main")]})}}]),a}(c.Component),gt=Object(l.b)((function(e){return{auth:e.auth.authenticated}}))(Ot),ft=Ke(function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={items:[],fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isLoading:!1,error:""},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("stock-summary");case 3:a=t.sent,e.setState({items:a.data.items,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0}),t.prev=3,t.next=6,ne.get("stock-summary",{params:{from:c,to:r}});case 6:s=t.sent,e.setState({items:s.data.items}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({error:t.t0.response.data.error});case 13:return t.prev=13,e.setState({isLoading:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})));return function(e){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.items;return t.isLoading?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.unit_cost}),Object(n.jsx)("td",{children:e.qty}),Object(n.jsx)("td",{children:e.rem_qty}),Object(n.jsx)("td",{children:Number(e.rem_qty*e.unit_cost).toFixed(2)})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"6",className:"text-center",children:"No Item"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"5",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.rem_qty*t.unit_cost}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Stock Summary Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsx)(J.a,{hidden:!0,children:"Search"})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Item"}),Object(n.jsx)("th",{children:"Unit Cost"}),Object(n.jsx)("th",{children:"Qty"}),Object(n.jsx)("th",{children:"Remaining Qty"}),Object(n.jsx)("th",{children:"Value"})]})}),this.renderTableBody()]})]})},"main")]})}}]),a}(c.Component)),yt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={customer:{},message:""},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.get("customers/".concat(e.props.match.params.id));case 2:a=t.sent,e.setState({customer:a.data.customer});case 4:case"end":return t.stop()}}),t)}))),e.handleChange=function(t,a){var n=e.state.customer;n.sales[a].payment_mode=t.target.value;var c=Object(h.a)({},n);e.setState({customer:c})},e.updatePaymentMode=function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var c,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.state.customer,t.prev=1,t.next=4,ne.post("update-sale-payment-mode",{id:c.sales[n].id,payment_mode:c.sales[n].payment_mode});case 4:r=t.sent,e.setState({message:r.data.message}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({message:t.t0.response.data.message});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.customer,c=t.message;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Customer Invoices"})},"sidebar"),Object(n.jsxs)("main",{className:"card",children:[c&&Object(n.jsx)("div",{children:c}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:["Phone: ",a.phone]}),Object(n.jsxs)(Ie.a,{children:["Name: ",a.name]}),Object(n.jsxs)(Ie.a,{children:["Address:"," ","".concat(a.billing_address,", ").concat(a.billing_city,", ").concat(a.billing_state," - ").concat(a.billing_pincode)]}),Object(n.jsxs)(Ie.a,{children:["Card: ",a.card]}),Object(n.jsx)(Ie.a,{children:Object(n.jsx)(z.b,{to:"/customer/".concat(a.phone),children:"Edit Customer Info"})})]}),Object(n.jsx)(De.a,{bordered:!0,striped:!0,style:{marginBottom:0},children:Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{width:"20%",children:"SNo."}),Object(n.jsx)("th",{width:"20%",children:"Invoice No."}),Object(n.jsx)("th",{width:"20%",children:"Date"}),Object(n.jsx)("th",{width:"20%",children:"Total Amount"}),Object(n.jsx)("th",{width:"20%",children:"Payment Mode"})]})})}),Object(n.jsx)("div",{style:{maxHeight:"45vh",overflowY:"scroll"},children:Object(n.jsx)(De.a,{bordered:!0,striped:!0,style:{marginBottom:0},children:Object(n.jsx)("tbody",{children:a.sales&&a.sales.length>0?a.sales.map((function(t,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{width:"20%",children:a+1}),Object(n.jsx)("td",{width:"20%",children:Object(n.jsx)(z.b,{to:"/invoice/".concat(t.id),children:"00"+t.id})}),Object(n.jsx)("td",{width:"20%",children:t.created_at}),Object(n.jsx)("td",{width:"20%",children:t.total_amount}),Object(n.jsxs)("td",{width:"20%",children:[Object(n.jsx)(W.a,{children:Object(n.jsxs)(K.a,{type:"select",name:"select",value:t.payment_mode,onChange:function(t){return e.handleChange(t,a)},children:[Object(n.jsx)("option",{value:"cash",children:"Cash"}),Object(n.jsx)("option",{value:"credit",children:"Credit"})]})}),Object(n.jsx)(J.a,{color:"success",onClick:function(t){return e.updatePaymentMode(t,a)},block:!0,children:"Update"})]})]},t.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",className:"text-center",children:"No Invoice"})})})})}),Object(n.jsx)(De.a,{bordered:!0,striped:!0,children:a.sales&&a.sales.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{width:"60%",colSpan:"3",children:"Total"}),Object(n.jsx)("th",{width:"20%",children:Number(a.sales.reduce((function(e,t){return e+t.total_amount}),0)).toFixed(2)}),Object(n.jsx)("th",{width:"20%"})]})}):null})]})]},"main")]})}}]),a}(c.Component);function vt(){var e=Object(c.useState)([]),t=Object(ye.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),i=Object(ye.a)(s,2),l=i[0],o=i[1],d=Object(c.useState)((new Date).toISOString().slice(0,10)),j=Object(ye.a)(d,2),h=j[0],u=j[1],b=Object(c.useState)((new Date).toISOString().slice(0,10)),p=Object(ye.a)(b,2),m=p[0],x=p[1],O=Object(c.useState)(""),g=Object(ye.a)(O,2);g[0],g[1];function f(){return(f=Object(te.a)(ee.a.mark((function e(t){var a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!0),e.prev=2,o(!0),e.next=6,ne.get("most-sold-items",{params:{from:h,to:m}});case 6:a=e.sent,r(a.data.itemsWithCount),o(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.setState({error:e.t0.response.data.error});case 14:return e.prev=14,o(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,11,14,17]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,ne.get("most-sold-items");case 3:t=e.sent,r(t.data.itemsWithCount),o(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Most Sold Items Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:function(e){return f.apply(this,arguments)},children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:h,onChange:function(e){return u(new Date(e.target.value).toISOString().slice(0,10))}})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:m,onChange:function(e){return x(new Date(e.target.value).toISOString().slice(0,10))}})]})," "]})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Item"}),Object(n.jsx)("th",{children:"Count"})]})}),l?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.count})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"4",className:"text-center",children:"No Item"})})})})]})]})},"main")]})}var _t=Ke(function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={sales:[],fromDate:(new Date).toISOString().slice(0,10),toDate:(new Date).toISOString().slice(0,10),isLoading:!1},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("cancelled-invoice");case 3:a=t.sent,e.setState({sales:a.data.sales,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0}),t.next=5,ne.get("cancelled-invoice",{params:{from:c,to:r}});case 5:s=t.sent,e.setState({sales:s.data.sales,isLoading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderTableBody=function(){var t=e.state,a=t.sales;return t.isLoading?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:Object(n.jsx)(z.b,{to:"/invoice/".concat(e.id),children:"IN00"+e.id})}),Object(n.jsx)("td",{children:Number(e.total_amount).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.profit).toFixed(2)})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",className:"text-center",children:"No Sale"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"2",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.profit}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Cancelled Invoice Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsx)(J.a,{hidden:!0,children:"Search"})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Invoice #"}),Object(n.jsx)("th",{children:"Invoice Total"}),Object(n.jsx)("th",{children:"Total Profit"})]})}),this.renderTableBody()]})]})},"main")]})}}]),a}(c.Component)),St=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).showDateFromTimeStamp=function(e){return new Date(e).toISOString().slice(0,10)},e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){this.props.showBill(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.purchase,t=e.party,a=e.items;return console.log(t),Object(n.jsx)("div",{className:"w-100",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsxs)(z.b,{to:"/bill",className:"non-printable",children:["<<"," Go to Create purchase"]}),Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("div",{className:"row pb-2 p-2",children:Object(n.jsxs)("div",{className:"col-md-12 sides",children:[Object(n.jsxs)("p",{className:"mb-0",children:[Object(n.jsxs)("span",{style:{width:"50%",display:"inline-block",textAlign:"left"},children:[Object(n.jsx)("strong",{children:"No."}),":"," ",Object(n.jsxs)("small",{className:"small",children:["BI00",e.id]})]}),Object(n.jsxs)("span",{style:{width:"50%",display:"inline-block",textAlign:"right"},children:[Object(n.jsx)("strong",{children:"Date"}),":"," ",Object(n.jsx)("small",{className:"small",children:e.created_at&&this.showDateFromTimeStamp(e.created_at)})]})]}),Object(n.jsxs)("p",{className:"mb-0",children:[Object(n.jsx)("strong",{children:"Name"}),":"," ",Object(n.jsxs)("small",{className:"small",children:[t.name,", +91",t.phone]})]})]})}),Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-bordered mb-0",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold non-printable",children:"SNo."}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Code"}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Name"}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Qty"}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["Unit Cost",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["MRP",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["Sale Price",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]}),Object(n.jsx)("th",{className:"text-uppercase small font-weight-bold",children:"Tax %"}),Object(n.jsxs)("th",{className:"text-uppercase small font-weight-bold",children:["Total",Object(n.jsx)("span",{style:{textTransform:"capitalize"},children:"(Rs)"})]})]})}),Object(n.jsx)("tbody",{children:a&&a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable",children:t+1}),Object(n.jsx)("td",{children:e.product_code}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.qty}),Object(n.jsx)("td",{children:e.unit_cost}),Object(n.jsx)("td",{children:e.mrp}),Object(n.jsx)("td",{children:e.sale_price}),Object(n.jsx)("td",{children:e.gst}),Object(n.jsx)("td",{children:e.unit_cost*e.qty})]},e.id)}))}),Object(n.jsxs)("tfoot",{className:"font-weight-bold",children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"7",children:"Payment Mode"}),Object(n.jsx)("td",{className:"text-uppercase",children:e.payment_mode||"No Payment"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"7",children:"Total Amount"}),Object(n.jsx)("td",{children:"Rs "+e.total_amount})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"7",children:"Amount Paid"}),Object(n.jsx)("td",{className:"font-weight-bold",children:"Rs "+e.amount_paid})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"non-printable"}),Object(n.jsx)("td",{colSpan:"7",children:"Amount Repay"}),Object(n.jsx)("td",{className:"font-weight-bold",children:"Rs "+e.amount_repay})]})]})]})})]})})]})})}}]),a}(c.Component),Ct=Object(l.b)((function(e){return{purchase:e.purchase}}),{showBill:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.get("bill/".concat(e));case 3:n=t.sent,a({type:T,payload:n.data.purchase}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(St),wt=Ke(function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={items:[],gstPercent:5,fromDate:null,toDate:null,isLoading:!1},e.componentDidMount=Object(te.a)(ee.a.mark((function t(){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ne.get("item-gst");case 3:a=t.sent,e.setState({items:a.data.items,isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState(Object(G.a)({},t.target.name,new Date(t.target.value).toISOString().slice(0,10)))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s,i;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,s=n.gstPercent,e.setState({isLoading:!0}),t.next=5,ne.get("item-gst",{params:{from:c,to:r,gst:s}});case 5:i=t.sent,e.setState({items:i.data.items,isLoading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleGstChange=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.fromDate,r=n.toDate,e.setState({isLoading:!0,gstPercent:a.target.value}),t.next=5,ne.get("item-gst",{params:{from:c,to:r,gst:a.target.value}});case 5:s=t.sent,e.setState({items:s.data.items,isLoading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isProfitOrLoss=function(e,t){return e-t>0?"Profit":e-t<0?"Loss":"-"},e.renderTableBody=function(){var t=e.state,a=t.items;return t.isLoading?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.qty}),Object(n.jsx)("td",{children:Number(e.unit_cost_without_gst).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.gst_amount_from_unit_cost).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.unit_cost_without_gst*e.qty).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.gst_amount_from_unit_cost*e.qty).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.unit_cost*e.qty).toFixed(2)}),Object(n.jsx)("td",{children:e.sold_qty}),Object(n.jsx)("td",{children:Number(e.sale_price_without_gst).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.gst_amount_from_sale_price).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.sale_price_without_gst*e.sold_qty).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.gst_amount_from_sale_price*e.sold_qty).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.sale_price*e.sold_qty).toFixed(2)}),Object(n.jsx)("td",{children:Number(e.sale_price*e.sold_qty-e.unit_cost*e.qty).toFixed(2)})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"11",className:"text-center",children:"No Item"})})}),a.length>0?Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{colSpan:"2",children:"Total"}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.unit_cost_without_gst}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.gst_amount_from_unit_cost}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.unit_cost_without_gst*t.qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.unit_cost*t.qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.unit_cost*t.qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.sold_qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.sale_price_without_gst}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.gst_amount_from_sale_price}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.sale_price_without_gst*t.sold_qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.gst_amount_from_sale_price*t.sold_qty}),0)).toFixed(2)}),Object(n.jsx)("th",{children:Number(a.reduce((function(e,t){return e+t.sale_price*t.sold_qty}),0)).toFixed(2)})]})}):null]})},e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fromDate,a=e.toDate,c=e.gstPercent;return Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"Item GST Report"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(V.a,{className:"mb-3",onSubmit:this.handleSubmit,children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"fromDate",children:"From"}),Object(n.jsx)(K.a,{type:"date",name:"fromDate",id:"fromDate",value:t,onChange:this.handleChange})]})," "]}),Object(n.jsxs)(Ie.a,{children:[Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"toDate",children:"To"}),Object(n.jsx)(K.a,{type:"date",name:"toDate",id:"toDate",value:a,onChange:this.handleChange})]})," "]}),Object(n.jsx)(J.a,{hidden:!0,children:"Search"})]}),Object(n.jsx)(J.a,{children:"Search"})]}),Object(n.jsxs)("p",{style:{textAlign:"center"},children:["Data showing for ",Object(n.jsx)("strong",{children:c+"%"})," ",t&&a&&Object(n.jsxs)(n.Fragment,{children:["for dates between ",Object(n.jsx)("strong",{children:t})," -"," ",Object(n.jsx)("strong",{children:a})]})]}),Object(n.jsx)("div",{className:"ml-auto col-md-4",children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{for:"select-gst",children:"Select GST"}),Object(n.jsxs)(K.a,{type:"select",name:"gst",id:"select-gst",value:c,onChange:this.handleGstChange,children:[Object(n.jsx)("option",{children:"0"}),Object(n.jsx)("option",{children:"5"}),Object(n.jsx)("option",{children:"12"}),Object(n.jsx)("option",{children:"18"}),Object(n.jsx)("option",{children:"28"})]})]})}),Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Item"}),Object(n.jsx)("th",{children:"Purchased Qty"}),Object(n.jsx)("th",{children:"Unit Cost"}),Object(n.jsx)("th",{children:"GST Amount"}),Object(n.jsx)("th",{children:"Unit Cost Value"}),Object(n.jsx)("th",{children:"GST Value"}),Object(n.jsx)("th",{children:"Purchase Value"}),Object(n.jsx)("th",{children:"Sold Qty"}),Object(n.jsx)("th",{children:"Sale Price"}),Object(n.jsx)("th",{children:"Sale GST"}),Object(n.jsx)("th",{children:"Sale Price Value"}),Object(n.jsx)("th",{children:"GST Value"}),Object(n.jsx)("th",{children:"Sale Value"}),Object(n.jsx)("th",{children:"Profit/Loss"})]})}),this.renderTableBody()]})})]})},"main")]})}}]),a}(c.Component)),Nt=null,Dt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={product_code:"",product_name:"",hsn:"",image:"",brand:"",wholesale_percent:"",retail_percent:"",gst:"",message:"",loading:!1},e.handleChange=function(t){"file"===t.target.type&&(e.setState(Object(G.a)({},t.target.name,t.target.files[0])),Nt=t.target.files[0]),e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s,i,l,o,d,j;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(e.state),e.setState({loading:!0,message:""}),n=e.state,c=n.product_code,r=n.product_name,s=n.hsn,n.image,i=n.brand,l=n.wholesale_percent,o=n.retail_percent,d=n.gst,(j=new FormData).append("product_code",c),j.append("product_name",r),j.append("hsn",s||""),j.append("image",Nt||""),j.append("brand",i||""),j.append("wholesale_percent",l),j.append("retail_percent",o),j.append("gst",d),t.prev=13,t.next=16,ne.post("add-fix-item",j,{headers:{"content-type":"multipart/form-data"}});case 16:e.setState({message:"Item added successfully",loading:!1,retail_percent:"",wholesale_percent:"",gst:"",image:"",hsn:"",product_name:"",product_code:""}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(13),e.setState({message:t.t0.response.data.message,loading:!1});case 22:case"end":return t.stop()}}),t,null,[[13,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.product_code,a=e.product_name,c=e.hsn,r=e.brand,s=e.wholesale_percent,i=e.retail_percent,l=e.gst,o=e.message,d=e.loading;return Object(n.jsxs)(_e,{children:[Object(n.jsx)(Ee,{},"side"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Code"}),Object(n.jsx)(K.a,{type:"text",name:"product_code",value:t,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Name"}),Object(n.jsx)(K.a,{type:"text",name:"product_name",value:a,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"HSN"}),Object(n.jsx)(K.a,{type:"text",name:"hsn",value:c,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Image"}),Object(n.jsx)(K.a,{type:"file",name:"image",onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Brand"}),Object(n.jsx)(K.a,{type:"text",name:"brand",value:r,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Wholesale % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"wholesale_percent",value:s,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Retail % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"retail_percent",value:i,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"GST %"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"gst",value:l,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})})]}),Object(n.jsx)(J.a,{color:"success",className:"mt-3",size:"sm",onClick:this.handleSubmit,disabled:d,children:"Add Item"}),Object(n.jsx)("span",{children:o})]})},"main")]})}}]),a}(c.Component),kt=Object(l.b)(null)(Ke(Dt)),It="",Pt=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={product_code:"",product_name:"",hsn:"",image:"",brand:"",wholesale_percent:"",retail_percent:"",gst:"",message:"",loading:!1},e.fetchItem=Object(te.a)(ee.a.mark((function t(){var a,n,c;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.prev=1,t.next=4,ne.get("get-fix-item/".concat(a));case 4:n=t.sent,c=n.data.item,e.setState({product_code:c.product_code,product_name:c.product_name,hsn:c.hsn,brand:c.brand,wholesale_percent:c.ws_margin,retail_percent:c.r_margin,gst:c.gst}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.setState({message:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleChange=function(t){"file"===t.target.type&&(e.setState(Object(G.a)({},t.target.name,t.target.files[0])),It=t.target.files[0]),e.setState(Object(G.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(te.a)(ee.a.mark((function t(a){var n,c,r,s,i,l,o,d,j,h;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(e.state),e.setState({loading:!0,message:""}),n=e.state,c=n.product_code,r=n.product_name,s=n.hsn,n.image,i=n.brand,l=n.wholesale_percent,o=n.retail_percent,d=n.gst,j=e.props.match.params.id,(h=new FormData).append("product_code",c),h.append("product_name",r),h.append("hsn",s||""),h.append("image",It||""),h.append("brand",i||""),h.append("wholesale_percent",l),h.append("retail_percent",o),h.append("gst",d),t.prev=14,t.next=17,ne.post("update-fix-item/".concat(j),h,{headers:{"content-type":"multipart/form-data"}});case 17:e.setState({message:"Item updated successfully"}),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(14),e.setState({message:t.t0.response.data.message});case 23:return t.prev=23,e.setState({loading:!1}),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[14,20,23,26]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(q.a)(a,[{key:"componentDidMount",value:function(){this.fetchItem()}},{key:"render",value:function(){var e=this.state,t=e.product_code,a=e.product_name,c=e.hsn,r=e.brand,s=e.wholesale_percent,i=e.retail_percent,l=e.gst,o=e.message,d=e.loading;return Object(n.jsxs)(_e,{children:[Object(n.jsx)(Ee,{},"side"),Object(n.jsx)("main",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Code"}),Object(n.jsx)(K.a,{type:"text",name:"product_code",value:t,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Product Name"}),Object(n.jsx)(K.a,{type:"text",name:"product_name",value:a,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"HSN"}),Object(n.jsx)(K.a,{type:"text",name:"hsn",value:c,onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Image"}),Object(n.jsx)(K.a,{type:"file",name:"image",onChange:this.handleChange})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Brand"}),Object(n.jsx)(K.a,{type:"text",name:"brand",value:r,onChange:this.handleChange})]})})]}),Object(n.jsxs)(ke.a,{children:[Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Wholesale % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"wholesale_percent",value:s,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"Retail % margin"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"retail_percent",value:i,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})}),Object(n.jsx)(Ie.a,{children:Object(n.jsxs)(W.a,{children:[Object(n.jsx)(Q.a,{children:"GST %"}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(K.a,{type:"text",name:"gst",value:l,onChange:this.handleChange}),Object(n.jsx)(Te.a,{addonType:"append",children:Object(n.jsx)(Fe.a,{children:"%"})})]})]})})]}),Object(n.jsx)(J.a,{color:"success",className:"mt-3",size:"sm",onClick:this.handleSubmit,disabled:d,children:"Update Item"}),Object(n.jsx)("span",{children:o})]})},"main")]})}}]),a}(c.Component),Tt=Object(l.b)(null)(Ke(Pt));function Ft(){var e=Object(c.useState)([]),t=Object(ye.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),i=Object(ye.a)(s,2),l=i[0],o=i[1];return Object(c.useEffect)((function(){function e(){return(e=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,ne.get("fix-item");case 4:t=e.sent,r(t.data.items),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,o(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)(_e,{children:[Object(n.jsx)("aside",{children:Object(n.jsx)("h1",{children:"All Items"})},"sidebar"),Object(n.jsx)("main",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)(De.a,{bordered:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"SNo."}),Object(n.jsx)("th",{children:"Image"}),Object(n.jsx)("th",{children:"Product Code"}),Object(n.jsx)("th",{children:"Product Name"}),Object(n.jsx)("th",{children:"HSN"}),Object(n.jsx)("th",{children:"Brand"}),Object(n.jsx)("th",{children:"WS Margin"}),Object(n.jsx)("th",{children:"R Margin"}),Object(n.jsx)("th",{children:"GST"}),Object(n.jsx)("th",{children:"Action"})]})}),l?Object(n.jsx)(H.a,{color:"dark",style:{display:"flex",justifyContent:"center"}}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("tbody",{children:a.length>0?a.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.full_image_path&&Object(n.jsx)("img",{className:"img-thumbnail",src:e.full_image_path,style:{width:"20%"},alt:""})}),Object(n.jsx)("td",{children:e.product_code}),Object(n.jsx)("td",{children:e.product_name}),Object(n.jsx)("td",{children:e.hsn}),Object(n.jsx)("td",{children:e.brand}),Object(n.jsx)("td",{children:e.ws_margin}),Object(n.jsx)("td",{children:e.r_margin}),Object(n.jsx)("td",{children:e.gst}),Object(n.jsx)("th",{children:Object(n.jsx)(z.b,{to:"/edit-item/".concat(e.id),children:"Edit"})})]},e.id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"9",className:"text-center",children:"No Item"})})})})]})})},"main")]})}var At=function(e){Object(B.a)(a,e);var t=Object(U.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(q.a)(a,[{key:"render",value:function(){return Object(n.jsx)(z.a,{children:Object(n.jsxs)(Y.c,{children:[Object(n.jsx)(Y.a,{exact:!0,path:"/login",component:Ce}),Object(n.jsx)(Y.a,{exact:!0,path:"/logout",component:Ne}),Object(n.jsx)(Y.a,{exact:!0,path:"/",component:$e}),Object(n.jsx)(Y.a,{exact:!0,path:"/bill",component:it}),Object(n.jsx)(Y.a,{exact:!0,path:"/invoice/:id",component:ot}),Object(n.jsx)(Y.a,{exact:!0,path:"/bill/:id",component:Ct}),Object(n.jsx)(Y.a,{exact:!0,path:"/daily-purchase-report",component:ht}),Object(n.jsx)(Y.a,{exact:!0,path:"/daily-sale-report",component:bt}),Object(n.jsx)(Y.a,{exact:!0,path:"/sale-profit",component:pt}),Object(n.jsx)(Y.a,{exact:!0,path:"/customers",component:mt}),Object(n.jsx)(Y.a,{exact:!0,path:"/customer/:phone",component:xt}),Object(n.jsx)(Y.a,{exact:!0,path:"/expense",component:gt}),Object(n.jsx)(Y.a,{exact:!0,path:"/stock-summary",component:ft}),Object(n.jsx)(Y.a,{exact:!0,path:"/customers/:id",component:yt}),Object(n.jsx)(Y.a,{exact:!0,path:"/most-sold-items",component:vt}),Object(n.jsx)(Y.a,{exact:!0,path:"/cancelled-invoice",component:_t}),Object(n.jsx)(Y.a,{exact:!0,path:"/item-gst",component:wt}),Object(n.jsx)(Y.a,{exact:!0,path:"/add-item",component:kt}),Object(n.jsx)(Y.a,{exact:!0,path:"/edit-item/:id",component:Tt}),Object(n.jsx)(Y.a,{exact:!0,path:"/items",component:Ft})]})})}}]),a}(c.Component),Rt=Object(o.d)(M,Object(o.a)(d.a));i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(l.a,{store:Rt,children:Object(n.jsx)(At,{})})}),document.getElementById("root"))},76:function(e,t,a){e.exports={table:"InvoicePdf_table__3QFfS",sides:"InvoicePdf_sides__3HN4M","non-printable":"InvoicePdf_non-printable__216SV"}}},[[162,1,2]]]);
//# sourceMappingURL=main.2d040f33.chunk.js.map